(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8aa70266"],{"/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--9-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--9-2!/builds/marketplace/fe/seller-ui/packages/seller-ui/scripts/vue-tsx-loader/loader.js!/builds/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.tsx":function(e,s,t){"use strict";t.r(s),t.d(s,"CallToActionPopup",(function(){return P}));var i=t("/builds/marketplace/fe/seller-ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),l=(t("/builds/marketplace/fe/seller-ui/node_modules/core-js/modules/es.reflect.to-string-tag.js"),t("/builds/marketplace/fe/seller-ui/node_modules/js-cookie/src/js.cookie.js")),o=t.n(l),a=t("/builds/marketplace/fe/seller-ui/node_modules/lodash/intersection.js"),r=t.n(a),n=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/common/constants/application.ts"),c=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/common/constants/cookie-names.ts"),d=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/common/routes/settings.ts"),u=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/common/store/application/index.ts 8080ed34e318f1296d11c35b19551a6a"),p=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/common/store/company.ts e975c316fc0a205685651fd779af9082"),m=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/common/store/user/index.ts 1fd6f88cd23fadb9bfc044ceb5fe6610"),b=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/common/store/user/constants.ts"),f=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/sc-components/ods/button/index.ts 503b8570e51ca5f4af638de5e9a61f43"),h=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/sc-components/ods/popup/index.ts c48af6c6c88c93ed513721e227667a8b"),k=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/vue-component-base/v2.ts 13c8e8dc00725f3a265ce3922e5811f0"),g=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/seller-ui/src/layout/base/header/company-mode-menu/constants.ts"),j=t("/builds/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/marketplace/fe/seller-ui/packages/seller-ui/src/store/brand.ts"),_=t("/builds/marketplace/fe/seller-ui/node_modules/url-loader/dist/cjs.js??ref--1-0!/builds/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/img/hand-with-flag.png"),v=t.n(_),y=t("/builds/marketplace/fe/seller-ui/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-0-0!/builds/marketplace/fe/seller-ui/packages/seller-ui/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-0-1!/builds/marketplace/fe/seller-ui/node_modules/postcss-loader/src/index.js??ref--5-oneOf-0-2!/builds/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.css?module"),S=t.n(y),x=t("/builds/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.i18n.json"),w=function(e,s,t,i){var l,o=arguments.length,a=o<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,t):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,s,t,i);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(a=(o<3?l(a):o>3?l(s,t,a):l(s,t))||a);return o>3&&a&&Object.defineProperty(s,t,a),a};const A={requisites:{view:"pop_up_upload_docs",accept:"pop_up_upload_docs_button",decline:"pop_up_upload_docs_later_button"},brandDocuments:{view:"pop_up_brand_activation",accept:"pop_up_brand_activation_button",decline:"pop_up_brand_activation_later_button"}},T=864e5,I="requisites-popup-ts",D="brand-documents-popup-hide",C="ignore-test-environment-onboarding-popup",O=500;let P=class e extends(Object(k["vueComponent"])({i18n:x})){constructor(...e){super(...e),Object(i["a"])(this,"companyStore",p["company"].context(this.$store)),Object(i["a"])(this,"userStore",m["user"].context(this.$store)),Object(i["a"])(this,"applicationStore",u["application"].context(this.$store)),Object(i["a"])(this,"brandAccountStore",j["a"].context(this.$store)),Object(i["a"])(this,"isShow",!1),Object(i["a"])(this,"requisitesPopupLastViewTS",0),Object(i["a"])(this,"brandDocumentsHide",!1),Object(i["a"])(this,"ignoreTestEnvironment",!1)}get popupItems(){return[{title:this.$tr("Осталось добавить реквизиты"),content:this.$tr("Проверим их в течение одного рабочего дня..."),acceptText:this.$tr("Добавить реквизиты"),declineText:this.$tr("Напомнить позже"),available:this.isRequisitesPopupAvailable,logViewName:A.requisites.view,onAccept:this.moveToAppPage,onDecline:this.closeRequisitesPopup},{title:this.$tr("Загрузите документы на бренд"),content:this.$tr("Чтобы активировать кабинет бренда..."),acceptText:this.$tr("Загрузить документы"),declineText:this.$tr("Больше не показывать"),available:this.isBrandDocumentsPopupAvailable,logViewName:A.brandDocuments.view,onAccept:this.moveToApplicationCreate,onDecline:this.closeBrandDocumentsPopup}]}get popupItemActive(){return this.popupItems.find(({available:e})=>e)||null}get isTestEnvironment(){return Boolean(o.a.get(c["a"]))}get isRequisitesPopupAvailable(){var e;const s=[d["b"].SETTINGS_COMPANY,d["b"].SETTINGS_DOCS,d["b"].SETTINGS_BANK_DETAILS];return this.companyStore.getters.isSellGoods&&r()(null===(e=this.userStore.state.user)||void 0===e?void 0:e.roles,[b["a"].DIRECTOR,b["a"].CB_DIRECTOR,b["a"].ADMIN]).length>0&&!this.companyStore.getters.isOfferAccepted&&this.userStore.getters.appStatus===n["a"].NEW&&!this.applicationStore.state.declineReason&&!s.includes(this.$route.path)&&Date.now()-this.requisitesPopupLastViewTS>T&&(!this.isTestEnvironment||this.ignoreTestEnvironment)}get isBrandDocumentsAvailableByPreconditions(){return this.companyStore.getters.isSellGoods&&this.companyStore.getters.isBrand&&this.companyStore.getters.isCountryCodeRu&&this.userStore.getters.isUserDirectorOrAdmin&&this.companyStore.getters.isOfferAccepted&&this.companyStore.getters.currentCompanyMode===g["a"].seller&&!this.companyStore.getters.isSelfEmployed&&this.$route.path!==d["b"].BRAND_DOCUMENTS&&!this.brandDocumentsHide&&(!this.isTestEnvironment||this.ignoreTestEnvironment)}get isBrandDocumentsPopupAvailable(){return this.isBrandDocumentsAvailableByPreconditions&&!1===this.isRepresentative}get isRepresentative(){return this.brandAccountStore.state.isBrandRepresentative}get requisitesLastViewLsKey(){return`${I}-${this.companyStore.getters.companyId}`}onPopupItemActiveChange(e){e||this.closePopup()}async created(){const e=this.companyStore.getters.createdAt,s=new Date(e).getTime()+T>Date.now();!Number(localStorage.getItem(this.requisitesLastViewLsKey))&&e&&s&&localStorage.setItem(this.requisitesLastViewLsKey,String(new Date(e).getTime())),this.requisitesPopupLastViewTS=Number(localStorage.getItem(this.requisitesLastViewLsKey))||0,this.brandDocumentsHide=Boolean(localStorage.getItem(D)),this.ignoreTestEnvironment=Boolean(localStorage.getItem(C)),void 0===this.isRepresentative&&this.isBrandDocumentsAvailableByPreconditions&&await this.brandAccountStore.actions.checkIsBrandRepresentative(),setTimeout(this.openPopup,O)}closeRequisitesPopup(){this.closePopup(),this.rememberRequisitesLastView(),this.logClick(A.requisites.decline)}rememberRequisitesLastView(){localStorage.setItem(this.requisitesLastViewLsKey,String(Date.now()))}closeBrandDocumentsPopup(){this.closePopup(),localStorage.setItem(D,"1"),this.logClick(A.requisites.decline)}openPopup(){this.popupItemActive&&(this.isShow=!0,this.logView(this.popupItemActive.logViewName))}closePopup(){this.isShow=!1}moveToAppPage(){this.closePopup(),this.rememberRequisitesLastView(),this.companyStore.getters.isCountryCodeRu,this.$router.push(this.companyStore.getters.isCountryCodeRu?{path:"/dashboard"}:{path:d["b"].SETTINGS,query:{continueDocs:"true"}}),this.logClick(A.requisites.accept)}moveToApplicationCreate(){this.closePopup(),this.$router.push({path:d["b"].BRAND_DOCUMENTS,query:{currentTab:d["a"].REPRESENTATIVE}}),this.logClick(A.brandDocuments.accept)}logView(e){this.$log({actionType:this.$logActionTypes.VIEW_ACTION,widgetName:e})}logClick(e){this.$log({actionType:this.$logActionTypes.CLICK_ACTION,widgetName:e})}render(){var e,s,t,i,l,o;const a=arguments[0];return a(h["a"],{attrs:{isShow:this.isShow,closable:!1,customClass:S.a.popup,scrollStrategy:"backdrop"}},[a(h["d"],{attrs:{title:(null===(e=this.popupItemActive)||void 0===e?void 0:e.title)||"",image:a("img",{attrs:{src:v.a,width:"192",height:"192",alt:"hand with flag"}})}}),a(h["b"],[null===(s=this.popupItemActive)||void 0===s?void 0:s.content]),a("div",{class:S.a.footer},[a("div",{class:"mr4"},[a(f["a"],{directives:[{name:"test-id",value:"onboarding-popup/button.accept"}],attrs:{whenClick:null===(t=this.popupItemActive)||void 0===t?void 0:t.onAccept}},[null===(i=this.popupItemActive)||void 0===i?void 0:i.acceptText])]),a(f["a"],{directives:[{name:"test-id",value:"onboarding-popup/button.decline"}],attrs:{variant:"secondary",whenClick:null===(l=this.popupItemActive)||void 0===l?void 0:l.onDecline}},[null===(o=this.popupItemActive)||void 0===o?void 0:o.declineText])])])}};w([Object(k["Watch"])("popupItemActive")],P.prototype,"onPopupItemActiveChange",null),P=w([k["Component"]],P)},"/builds/marketplace/fe/seller-ui/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-0-0!/builds/marketplace/fe/seller-ui/packages/seller-ui/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-0-1!/builds/marketplace/fe/seller-ui/node_modules/postcss-loader/src/index.js??ref--5-oneOf-0-2!/builds/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.css?module":function(e,s,t){e.exports={popup:"index_popup_jw8kM",footer:"index_footer_-N3it"}},"/builds/marketplace/fe/seller-ui/node_modules/url-loader/dist/cjs.js??ref--1-0!/builds/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/img/hand-with-flag.png":function(e,s){e.exports="/app/img/hand-with-flag.4f6283b6.png"},"/builds/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.i18n.json":function(e){e.exports=JSON.parse('{"messages":{"ru":{"Осталось добавить реквизиты":"Осталось добавить реквизиты","Проверим их в течение одного рабочего дня...":"Проверим их в течение одного рабочего дня. Если всё в порядке, сможете принять оферту и продавать товары.","Добавить реквизиты":"Добавить реквизиты","Напомнить позже":"Напомнить позже","Загрузите документы на бренд":"Загрузите документы на бренд","Чтобы активировать кабинет бренда...":"Чтобы активировать кабинет бренда, нужно отправить нам документы на право владения или защиты товарного знака. На проверку уйдёт около 3 рабочих дней.","Загрузить документы":"Загрузить документы","Больше не показывать":"Больше не показывать"},"en":{"Осталось добавить реквизиты":"Only remains to add payment details","Проверим их в течение одного рабочего дня...":"We will check it within one working day. If everything is okay, you can accept the offer and sell products.","Добавить реквизиты":"Add payment details","Напомнить позже":"Remind me later","Загрузите документы на бренд":"Upload brand documents","Чтобы активировать кабинет бренда...":"To activate brand account, you need to send us documents for the ownership or protection of the trademark. It will take about 3 working days to check.","Загрузить документы":"Upload documents","Больше не показывать":"Don\'t show again"},"zh-Hans":{"Осталось добавить реквизиты":"还需要添加付款资料","Проверим их в течение одного рабочего дня...":"我们将在一个工作日内完成检查。如果一切正常，您将可以接受要约并销售商品。","Добавить реквизиты":"添加付款资料","Напомнить позже":"稍后提醒我","Загрузите документы на бренд":"将文件上传到品牌","Чтобы активировать кабинет бренда...":"如果您想激活品牌帐户，则需要向我们发送商标所有权或保护文件。检查大约需要 3 个工作日。","Загрузить документы":"上传文件","Больше не показывать":"不再显示"},"tr":{"Осталось добавить реквизиты":"Ayrıntıları eklemek için kaldı","Проверим их в течение одного рабочего дня...":"Onları bir iş günü içinde kontrol edeceğiz. Hiçbir sorun yoksa, teklifi kabul edebilir ve ürünleri satabilirsiniz.","Добавить реквизиты":"Ayrıntıları ekle","Напомнить позже":"Daha sonra hatırlat","Загрузите документы на бренд":"Marka belgelerini yükle ","Чтобы активировать кабинет бренда...":"Marka hesabını etkinleştirmek için, bir ticari markaya sahip olma veya ticari markayı koruma hakkı için bize belgeler göndermeniz gerekir. Doğrulanması yaklaşık 3 iş günü sürecektir.","Загрузить документы":"Belgeleri yükle","Больше не показывать":"Bir daha gösterme"}}}')}}]);
//# sourceMappingURL=chunk-8aa70266.2e19b6d5.js.map