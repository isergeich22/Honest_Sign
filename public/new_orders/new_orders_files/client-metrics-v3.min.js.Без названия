!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=82)}([function(t,e,r){var n=r(49);t.exports=function(t,e,r){var o=null==t?void 0:n(t,e);return void 0===o?r:o}},function(t,e,r){var n=r(15),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},function(t,e,r){var n=r(16),o=r(36),i=r(13),a=r(4),s=r(22),c=r(24),u=r(17),p=r(26),f=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||c(t)||p(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(u(t))return!n(t).length;for(var r in t)if(f.call(t,r))return!1;return!0}},function(t,e,r){var n=r(27);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){var n=r(38),o=r(41);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},function(t,e,r){var n=r(7),o=r(32),i=r(33),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,r){var n=r(1).Symbol;t.exports=n},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,r){var n=r(5)(Object,"create");t.exports=n},function(t,e,r){var n=r(66);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},function(t,e,r){var n=r(71);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,r){var n=r(79),o=r(16),i=r(22);t.exports=function(t){return i(t)?n(t):o(t)}},function(t,e,r){var n=r(31),o=r(8),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,c=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=c},function(t,e,r){var n=r(6),o=r(8);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},function(t,e,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,r(30))},function(t,e,r){var n=r(17),o=r(34),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=[];for(var r in Object(t))i.call(t,r)&&"constructor"!=r&&e.push(r);return e}},function(t,e){var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,r){var n=r(6),o=r(19);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,r){var n=r(5)(r(1),"Map");t.exports=n},function(t,e,r){var n=r(18),o=r(23);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,r){(function(t){var n=r(1),o=r(45),i=e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i?n.Buffer:void 0,c=(s?s.isBuffer:void 0)||o;t.exports=c}).call(this,r(25)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){var n=r(46),o=r(47),i=r(48),a=i&&i.isTypedArray,s=a?o(a):n;t.exports=s},function(t,e,r){var n=r(28),o=r(29);t.exports=function t(e,r,i,a,s){var c=-1,u=e.length;for(i||(i=o),s||(s=[]);++c<u;){var p=e[c];r>0&&i(p)?r>1?t(p,r-1,i,a,s):n(s,p):a||(s[s.length]=p)}return s}},function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}},function(t,e,r){var n=r(7),o=r(13),i=r(4),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(6),o=r(8);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},function(t,e,r){var n=r(7),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[s]=r:delete t[s]),o}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n=r(35)(Object.keys,Object);t.exports=n},function(t,e){t.exports=function(t,e){return function(r){return t(e(r))}}},function(t,e,r){var n=r(37),o=r(21),i=r(42),a=r(43),s=r(44),c=r(6),u=r(20),p=u(n),f=u(o),l=u(i),d=u(a),_=u(s),m=c;(n&&"[object DataView]"!=m(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=m(new o)||i&&"[object Promise]"!=m(i.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(t){var e=c(t),r="[object Object]"==e?t.constructor:void 0,n=r?u(r):"";if(n)switch(n){case p:return"[object DataView]";case f:return"[object Map]";case l:return"[object Promise]";case d:return"[object Set]";case _:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,r){var n=r(5)(r(1),"DataView");t.exports=n},function(t,e,r){var n=r(18),o=r(39),i=r(19),a=r(20),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,p=c.toString,f=u.hasOwnProperty,l=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(n(t)?l:s).test(a(t))}},function(t,e,r){var n,o=r(40),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!i&&i in t}},function(t,e,r){var n=r(1)["__core-js_shared__"];t.exports=n},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,r){var n=r(5)(r(1),"Promise");t.exports=n},function(t,e,r){var n=r(5)(r(1),"Set");t.exports=n},function(t,e,r){var n=r(5)(r(1),"WeakMap");t.exports=n},function(t,e){t.exports=function(){return!1}},function(t,e,r){var n=r(6),o=r(23),i=r(8),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[n(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,r){(function(t){var n=r(15),o=e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&n.process,s=function(){try{var t=i&&i.require&&i.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,r(25)(t))},function(t,e,r){var n=r(50),o=r(78);t.exports=function(t,e){for(var r=0,i=(e=n(e,t)).length;null!=t&&r<i;)t=t[o(e[r++])];return r&&r==i?t:void 0}},function(t,e,r){var n=r(4),o=r(51),i=r(52),a=r(75);t.exports=function(t,e){return n(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e,r){var n=r(4),o=r(14),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!o(t))||(a.test(t)||!i.test(t)||null!=e&&t in Object(e))}},function(t,e,r){var n=r(53),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,function(t,r,n,o){e.push(n?o.replace(i,"$1"):r||t)}),e});t.exports=a},function(t,e,r){var n=r(54);t.exports=function(t){var e=n(t,function(t){return 500===r.size&&r.clear(),t}),r=e.cache;return e}},function(t,e,r){var n=r(55);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(o.Cache||n),r}o.Cache=n,t.exports=o},function(t,e,r){var n=r(56),o=r(70),i=r(72),a=r(73),s=r(74);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},function(t,e,r){var n=r(57),o=r(63),i=r(21);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(t,e,r){var n=r(58),o=r(59),i=r(60),a=r(61),s=r(62);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},function(t,e,r){var n=r(9);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,r){var n=r(9),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(e,t)?e[t]:void 0}},function(t,e,r){var n=r(9),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},function(t,e,r){var n=r(9);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,r){var n=r(64),o=r(65),i=r(67),a=r(68),s=r(69);function c(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}c.prototype.clear=n,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=a,c.prototype.set=s,t.exports=c},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(10),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0)&&(r==e.length-1?e.pop():o.call(e,r,1),--this.size,!0)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){var n=r(10);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},function(t,e,r){var n=r(10);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,r){var n=r(10);t.exports=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}},function(t,e,r){var n=r(11);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,r){var n=r(11);t.exports=function(t){return n(this,t).get(t)}},function(t,e,r){var n=r(11);t.exports=function(t){return n(this,t).has(t)}},function(t,e,r){var n=r(11);t.exports=function(t,e){var r=n(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}},function(t,e,r){var n=r(76);t.exports=function(t){return null==t?"":n(t)}},function(t,e,r){var n=r(7),o=r(77),i=r(4),a=r(14),s=n?n.prototype:void 0,c=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return c?c.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},function(t,e,r){var n=r(14);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,r){var n=r(80),o=r(13),i=r(4),a=r(24),s=r(81),c=r(26),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=i(t),p=!r&&o(t),f=!r&&!p&&a(t),l=!r&&!p&&!f&&c(t),d=r||p||f||l,_=d?n(t.length,String):[],m=_.length;for(var y in t)!e&&!u.call(t,y)||d&&("length"==y||f&&("offset"==y||"parent"==y)||l&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,m))||_.push(y);return _}},function(t,e){t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},function(t,e){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,r){"use strict";r.r(e);var n=r(3),o=r.n(n),i=r(2),a=r.n(i),s=r(0),c=r.n(s);const u=(t,e)=>{let r="";return t&&(r="sitespeed"),e&&(r="ui-tests"),window&&window.navigator.webdriver&&(r="webdriver"),r?{testingToolName:r}:{}},p=navigator.connection||navigator.mozConnection||navigator.webkitConnection,f=(new Date).toISOString(),l=(t,e)=>t.filter(({name:t})=>t===e);function d(){const t="CELLULAR_"+c()(p,"effectiveType","").toUpperCase().replace("-","_");return p?{connectionType:t}:{}}async function _({attributes:t,isSiteSpeed:e}){const{browser:r,platformVersion:n}=await async function(t){if(!window.__BROWSER_DETECT__)return{browser:"unknown",platformVersion:"unknown"};const e=window.__BROWSER_DETECT__.version;return{browser:t?"sitespeed":await window.__BROWSER_DETECT__.getBrowserName(),platformVersion:e}}(e);return{...t,browser:r,platformVersion:n}}function m(t){if(!t||"string"!=typeof t)return null;const e=t.replace(/[^\d;]/g,"");return parseInt(e[0])||null}async function y(t,{attributes:e,user:r,page:n,object:o,properties:i={},isSiteSpeed:a,isUiTests:s}){const c=await _({attributes:e,isSiteSpeed:a}),p=d();return[{metrics:function(t={}){return Object.keys(t).map(e=>({type:e,value:t[e]}))}(t),attributes:c,object:o,actionType:"metric",timestamp:f,version:"2",user:r,page:n,...u(a,s),properties:{...i,...p}}]}async function T(t){return new Promise(e=>setTimeout(e,t))}var g=t=>async e=>{const{metrics:r,properties:n}=e;if(a()(r))return{};const o={...t,properties:{...t.properties,...n}};return await y(r,o)},v=r(12),b=r.n(v),E=function(t,e){if("number"==typeof t&&"number"==typeof e)return t-e};const S=(t,e=!1)=>{const{domainLookupEnd:r,domainLookupStart:n,connectEnd:o,responseStart:i,responseEnd:a,requestStart:s,secureConnectionStart:c,fetchStart:u,connectStart:p,duration:f,decodedBodySize:l,encodedBodySize:d,transferSize:_,nextHopProtocol:y,initiatorType:T,serverTiming:g=[]}=t,v=E(c||o,p),S={...{TRANSFER_SIZE:_,DECODED_SIZE:l,ENCODED_SIZE:d},...{CACHE_TIME:E(n,u),TLS_TIME:E(s,c),DNS_TIME:E(r,n)},...{TCP_TIME:v,TIME_TO_FIRST_BYTE:E(i,n),TIME_TO_LAST_BYTE:E(a,n)},..."img"===T||e?((t=[])=>{const e=t.reduce((t,e)=>"o3_img_resize"===e.name?(t[e.name]=e.duration||0,t):(t[e.name]=e.description||"",t),{}),r={};return"HIT"===e["cdn-cache"]?r.CDN_CACHE=2:"HIT"===e.o3_img_cache?r.CDN_CACHE=1:"MISS"===e.o3_img_cache&&e.o3_img_resize&&(r.IMG_RESIZE_TIME=e.o3_img_resize),r})(g):{},TOTAL_TIME:f,PROTOCOL_VERSION:m(y)},h={};return b()(S).filter(t=>S[t]>0).forEach(t=>h[t]=S[t]),{metrics:h,properties:{url:t.name}}},h=["https://pxl-a20.ozone.ru/pxl/t.gif","https://pxl-b10.ozone.ru/pxl/t.gif","https://pxl-b20.ozone.ru/pxl/t.gif","https://pxl-c10.ozone.ru/pxl/t.gif","https://pxl-c20.ozone.ru/pxl/t.gif","https://pxl-d10.ozone.ru/pxl/t.gif","https://pxl-d20.ozone.ru/pxl/t.gif","https://pxl-e10.ozone.ru/pxl/t.gif","https://pxl-f10.ozone.ru/pxl/t.gif"];const w=async(t,e=h)=>{await async function(t){for(const e of t)try{await fetch(e,{cache:"no-store"})}catch(t){}}(e);const r=()=>{const t=e.map(t=>performance.getEntriesByName(t));return o()(t)};let n=r(),i=10;for(;n.length!==e.length||i<=0;)await T(100),n=r(),i-=1;const s={...t,object:{type:"IMAGE"}},c=n.map(t=>S(t,!0)).map(g(s)),u=await Promise.all(c);return u.filter(t=>!a()(t)),o()(u)};const x={Total:"ST_TOTAL",Internal:"ST_INTERNAL",Widgets:"ST_WIDGETS",Action:"ST_ACTION",Resolve:"ST_RESOLVE",Render:"ST_BODY_LB",RenderFirstByte:"ST_BODY_FB",RenderHeadFirstByte:"ST_HEAD_FB",RenderHead:"ST_HEAD_LB",FirstByte:"ST_COMPOSER_FB",LastByte:"ST_COMPOSER_LB",BodyDownloadTime:"ST_BODY_HTML_DOWNLOAD_TIME",BodyJSONTime:"ST_BODY_JSON_TIME",ComposerInternal:"ST_COMPOSER_INTERNAL",EntrypointInternal:"ST_ENTRYPOINT_INTERNAL",HeadDownloadTime:"ST_HEAD_HTML_DOWNLOAD_TIME",HeadJSONTime:"ST_HEAD_JSON_TIME"},O=(t=[])=>{const e={};return t&&0!==t.length?(t.forEach(({name:t,duration:r})=>{x[t]&&(e[x[t]]=r)}),e):e},j={CLS:"CUMULATIVE_LAYOUT_SHIFT",LCP:"LARGEST_CONTENTFUL_PAINT",FID:"FIRST_INPUT_DELAY",LT:"LONG_TASK_COUNT"},I=t=>{const e={};return Object.keys(t).forEach(r=>{var n;t[r].value&&(e[n=r,j[n]]=t[r].value)}),e},M=()=>{let t;t="function"==typeof performance.getEntriesByType?performance.getEntriesByType("navigation")[0]:{...performance.navigation,...performance.timing};const{domLoading:e,domComplete:r,domInteractive:n,domContentLoadedEventEnd:o,domainLookupEnd:i,domainLookupStart:a,connectEnd:s,redirectEnd:u,redirectStart:p,responseStart:f,responseEnd:l,requestStart:d,secureConnectionStart:_,navigationStart:y,startTime:T,fetchStart:g,connectStart:v,redirectCount:S}=t;let h;const w=E(_||s,v),x={CACHE_TIME:E(a,g),TLS_TIME:E(d,_),DNS_TIME:E(i,a)},j={TCP_TIME:w,REDIRECT_TIME:E(u,p),REDIRECT_COUNT:S,TIME_TO_FIRST_BYTE:E(f,a),TIME_TO_LAST_BYTE:E(l,a)},I={DOM_LOADING_TIME:E(e,y||T),DOM_CONTENT_LOADED_TIME:E(o,y||T),DOM_COMPLETE_TIME:E(r,y||T),DOM_INTERACTIVE_TIME:E(n,y||T),SERVER_TIME:E(f,d),RESPONSE_TIME:E(l,f)};if(h={...I,...x,...j},performance.getEntriesByName){const e=c()(performance.getEntriesByName("HYDRATION_TIME"),"0.startTime"),{duration:r,decodedBodySize:n,encodedBodySize:o,transferSize:i,domContentLoadedEventEnd:a,nextHopProtocol:s}=t,u={TRANSFER_SIZE:i,DECODED_SIZE:n,ENCODED_SIZE:o},p=window.__ST__?((t={})=>Object.entries(t).map(([t,e])=>({name:t,duration:e})))(window.__ST__):window.serverTiming||t.serverTiming;h={...h,...u,...O(p),HYDRATION_TIME:E(e,a),TOTAL_TIME:r,PROTOCOL_VERSION:m(s)}}const M={};return b()(h).filter(t=>h[t]>0).forEach(t=>M[t]=h[t]),M};var A=function(t=[]){if(performance.getEntriesByType){const e=performance.getEntriesByType("mark").reduce((t,e)=>(t[e.name]=e.startTime,t),{}),r={};for(let n=0;n<t.length;n++){const o=t[n],i=E(e[o+":end"],e[o+":start"]);i&&i>0&&(r[o]=i,performance.clearMarks(o+":end"))}return 0===Object.keys(r).length?{}:r}return{}};function C(t=[]){return Math.max(...t.map(t=>t.responseEnd))-Math.min(...t.map(t=>t.requestStart))||null}function N(t){return t.split(".").pop()}function P(t){if(!t)return{};const e=performance.getEntriesByType("resource"),r=e.filter(e=>"img"===e.initiatorType&&t.includes(e.name)),n=e.filter(e=>"script"===e.initiatorType&&t.includes(e.name)),o=e.filter(e=>"css"===N(e.name)&&t.includes(e.name)),i=e.filter(e=>{const r=N(e.name);return!!["woff","woff2"].includes(r)&&t.includes(e.name)});return{INTERNAL_LOAD_IMG:C(r),INTERNAL_LOAD_JS:C(n),INTERNAL_LOAD_CSS:C(o),INTERNAL_LOAD_FONT:C(i)}}var k=({trackNavigation:t,trackPaint:e,customMarksNames:r,internalResources:n})=>({...t?M():{},...e?function(){if(performance.getEntriesByType){const t=performance.getEntriesByType("paint"),[e]=l(t,"first-contentful-paint"),[r]=l(t,"first-paint");if(e&&r)return{FIRST_CONTENTFUL_PAINT:e.startTime,FIRST_PAINT:r.startTime}}return{}}():{},...A(r),...P(n)}),R=({endpoint:t,headers:e},r)=>{const n=JSON.stringify(r);e&&"object"==typeof e?fetch(t,{method:"POST",keepalive:true,body:n,headers:{"Content-Type":"application/json",...e}}):navigator.sendBeacon(t,n)};const L=async({metrics:t={},getUser:e,getPage:r,object:n,getAttributes:i,endpoint:s,trackNavigation:u,trackPaint:p,customMarksNames:f,trackImages:l,trackJs:d,trackSpa:_,trackCdnImages:m,spaTransitionUrl:T,queryUrl:v,trackPagination:b,paginationUrl:E,extraPageInfo:h,isSiteSpeed:x,isUiTests:j,webVitalsVariable:M,headers:A,internalResources:C})=>{if(!window.performance||!performance.timing)return;const N={...k({trackNavigation:u,trackPaint:p,customMarksNames:f,internalResources:C}),...t},P={attributes:i(),user:e(),page:r(),object:n,isSiteSpeed:x,isUiTests:j},L=l?await async function(t){const e={...t,object:{type:"IMAGE"}},r=performance.getEntriesByType("resource").filter(t=>"img"===t.initiatorType).map(t=>S(t)).map(g(e)),n=await Promise.all(r);return n.filter(t=>!a()(t)),o()(n)}(P):[],U=d?await async function(t){const e={...t,object:{type:"SCRIPT"}},r=performance.getEntriesByType("resource").filter(t=>/\.js$/.test(t.name)).map(t=>S(t)).map(g(e)),n=await Promise.all(r);return n.filter(t=>!a()(t)),o()(n)}(P):[],B=b?await((t,e,{layoutContainer:r,layoutPagePartIndex:n,queryUrl:o=""})=>{const i=c()(performance.getEntriesByName("paginationStart"),"0.startTime"),a=c()(performance.getEntriesByName("paginationEnd"),"0.startTime"),s=performance.getEntriesByType("resource").reverse().find(t=>t.name.includes(encodeURIComponent(o))||t.name.includes(e));if(!s)return[];performance.clearMarks("paginationStart"),performance.clearMarks("paginationEnd");const u=S(s);return r&&n&&(t.page={...t.page,layoutContainer:r,layoutPagePartIndex:n}),u.metrics={...u.metrics,...O(s.serverTiming)},u.metrics.TOTAL_TIME=a-i,g(t)(u)})(P,E,h):[],D=_?await((t,e,{saveMarks:r}={},n="")=>{const o=c()(performance.getEntriesByName("spaTransitionStart"),"0.startTime"),i=c()(performance.getEntriesByName("spaTransitionEnd"),"0.startTime"),a=c()(performance.getEntriesByName("layoutTimeStart"),"0.startTime"),s=c()(performance.getEntriesByName("layoutTimeEnd"),"0.startTime"),u=performance.getEntriesByType("resource").reverse().find(t=>t.name.includes(encodeURIComponent(n))||t.name.includes(e));if(!u)return[];const p=S(u);return p.metrics={...p.metrics,...O(u.serverTiming)},p.metrics.TOTAL_TIME=i-o,p.metrics.LAYOUT_TIME=s-a,r||setTimeout(()=>{performance.clearMarks("spaTransitionStart"),performance.clearMarks("spaTransitionEnd"),performance.clearMarks("layoutTimeStart"),performance.clearMarks("layoutTimeEnd")},0),g(t)(p)})(P,T,{saveMarks:x},v):[],z=M?await y(I(M),P):[],F={events:[...u||p||f?await y(N,P):[],...D,...B,...L,...U,...z,...m?await w(P):[]]};R({endpoint:s,headers:A},F)};const U=async({getAttributes:t,object:e,propertyUrl:r,metrics:n,getUser:o,getPage:i,endpoint:a,headers:s,isSiteSpeed:c,isUiTests:p,errors:l})=>{const m={attributes:t(),user:o(),page:i(),object:e,isSiteSpeed:c,isUiTests:p,properties:{url:r}};l&&l.length&&m.properties&&(m.properties.errors=l);const y=await async function(t,{attributes:e,user:r,page:n,object:o,properties:i={},isSiteSpeed:a,isUiTests:s}){const c=await _({attributes:e,isSiteSpeed:a}),p=d();return[{customMetrics:t,attributes:c,object:o,actionType:"metric",timestamp:f,version:"2",user:r,page:n,...u(a,s),properties:{...i,...p}}]}(n,m);R({endpoint:a,headers:s},{events:y})},B=(t=[])=>t.map(t=>{const[e="",r=0]=t;return{name:"WidgetRender",value:r,metric:e}});function D(t,e,r,n){const o=function t(e){const r=[];for(const n of e)if(void 0!==n.timeSpent&&r.push(n),void 0!==n.placeholders)for(const e of n.placeholders)r.push(...t(e.widgets));return r}(r);o.length>0&&function(t,e,r=[],n){const o=r.map(t=>({name:"WidgetTimeSpent",value:t.timeSpent,metric:t.name}));window.__ClientMetrics__.trackCustomMetric({propertyUrl:t,objectType:e,metrics:n?[...o,...B(window.widgetsTiming)]:o})}(t,e,o,n)}window.__ClientMetrics__={},window.__ClientMetrics__.init=function({isBot:t=!1,endpoint:e="",getAttributes:r=()=>null,trackNavigation:n=!0,trackPaint:o=!0,trackImages:i=!1,trackJs:a=!1,trackCdnImages:s=!1,customMarksNames:u=[],trackMemory:p=!0,getUser:f=()=>null,getPage:l=()=>null,object:d={},settings:_={spaTransitionUrl:"",paginationUrl:""},isSiteSpeed:m=!1,isUiTests:T=!1,webVitalsVariable:g=window.$$windowMetrics,headers:v=null}={}){a=!1;try{if(t)return{};if(!e)return{};if(!(window&&window.navigator&&navigator.sendBeacon))return{};const b=function(){const t=document.querySelectorAll("[internal]"),e=[];for(let r=0;r<t.length;r++){const n=t[r],o=n.href||n.src;o&&e.push(o)}const r=window.__INTERNAL_IMAGES__||[];return e.concat(r)}(),E={internalResources:b,metrics:{},getAttributes:r,isSiteSpeed:m,isUiTests:T,object:d,getUser:f,getPage:l,endpoint:e,trackNavigation:n,trackPaint:o,trackImages:i,trackJs:a,trackCdnImages:s,customMarksNames:u,headers:v},{spaTransitionUrl:S,paginationUrl:h}=_,w=()=>L(E),x=()=>L({...E,webVitalsVariable:g});"complete"===document.readyState?setTimeout(x,0):window.addEventListener("load",()=>setTimeout(x,0)),window.addEventListener("beforeunload",w),p&&window.addEventListener("beforeunload",()=>(async({endpoint:t,getAttributes:e,getPage:r,getUser:n,headers:o,...i})=>{const a=c()(window.performance,["memory","usedJSHeapSize"]),s=c()(window.performance,["memory","totalJSHeapSize"]),u={TOTAL_MEMORY_USAGE:s,JS_HEAP_MEMORY_USAGE:a},p={...i,attributes:e(),page:r(),user:n()};if(a||s){const e=await y(u,p);R({endpoint:t,headers:o},{events:e})}})({endpoint:e,getAttributes:r,getPage:l,getUser:f,headers:null,object:{type:"APPLICATION"}})),window.__ClientMetrics__.trackSpaTransition=(t="",{objectType:n=""}={})=>{L({customMarksNames:u,getAttributes:r,object:{type:n||"PAGE"},getUser:f,getPage:l,endpoint:e,trackSpa:!0,spaTransitionUrl:S,queryUrl:t,isSiteSpeed:m,isUiTests:T,headers:null})},window.__ClientMetrics__.trackSpa=()=>{L({customMarksNames:u,getAttributes:r,object:{type:"PAGE"},getUser:f,getPage:l,endpoint:e,isSiteSpeed:m,isUiTests:T,headers:v})},window.__ClientMetrics__.trackCustomMetricsForSellerCenter=()=>{L({customMarksNames:u,getAttributes:r,object:{type:"APPLICATION"},getUser:f,getPage:l,endpoint:e,isSiteSpeed:m,isUiTests:T,headers:v})},window.__ClientMetrics__.trackPaginationChange=t=>{L({getAttributes:r,object:{type:"PAGE_PART"},getUser:f,getPage:l,endpoint:e,trackPagination:!0,paginationUrl:h,extraPageInfo:t,isSiteSpeed:m,isUiTests:T})},window.__ClientMetrics__.trackCustomMetric=({propertyUrl:t,metrics:n,objectType:o="CUSTOM",errors:i})=>{U({getAttributes:r,object:{type:o},propertyUrl:t,metrics:n,getUser:f,getPage:l,endpoint:e,isSiteSpeed:m,isUiTests:T,headers:null,errors:i})},window.__ClientMetrics__.trackWidgetsTimeSpent=D}catch(t){console.error(t)}},window.__ClientMetricsAutoInit__&&window.__ClientMetricsInit__&&window.__ClientMetrics__.init(window.__ClientMetricsInit__)}])});
