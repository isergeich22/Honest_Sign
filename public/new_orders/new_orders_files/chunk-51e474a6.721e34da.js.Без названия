(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51e474a6"],{"/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--9-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--9-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/scripts/vue-tsx-loader/loader.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.tsx":function(e,s,t){"use strict";t.r(s),t.d(s,"CallToActionPopup",(function(){return I}));var i=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),l=(t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/core-js/modules/es.reflect.to-string-tag.js"),t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/js-cookie/src/js.cookie.js")),o=t.n(l),a=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/lodash/intersection.js"),r=t.n(a),n=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/common/constants/application.ts"),d=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/common/constants/cookie-names.ts"),p=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/common/routes/settings.ts"),c=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/common/store/application/index.ts 075af0b1cb7731159e9092d40414e3d0"),u=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/common/store/company.ts 3d9f860dbb2bb73fc260b7eb941a9aed"),m=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/common/store/user/index.ts 395e88e4a0790b5a201f1faf38eb0d61"),b=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/common/store/user/constants.ts"),f=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/sc-components/ods/button/index.ts 5d74c3e7638c98deebf757ec64ab1f4a"),h=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/sc-components/ods/popup/index.ts b6a37b4db8b7d19d8f100b5fd0a2afe5"),k=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/vue-component-base/v2.ts 98841c901a7f7f5af90987c5dca3b0c5"),S=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/layout/base/header/company-mode-menu/constants.ts"),g=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/cache-loader/dist/cjs.js??ref--8-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/babel-loader/lib/index.js!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/ts-loader/index.js??ref--8-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/store/brand.ts"),C=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/url-loader/dist/cjs.js??ref--1-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/img/hand-with-flag.png"),R=t.n(C),E=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-0-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-0-1!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/postcss-loader/src/index.js??ref--5-oneOf-0-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.css?module"),V=t.n(E),j=t("/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.i18n.json"),_=function(e,s,t,i){var l,o=arguments.length,a=o<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,t):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,s,t,i);else for(var r=e.length-1;r>=0;r--)(l=e[r])&&(a=(o<3?l(a):o>3?l(s,t,a):l(s,t))||a);return o>3&&a&&Object.defineProperty(s,t,a),a};const v={requisites:{view:"pop_up_upload_docs",accept:"pop_up_upload_docs_button",decline:"pop_up_upload_docs_later_button"},brandDocuments:{view:"pop_up_brand_activation",accept:"pop_up_brand_activation_button",decline:"pop_up_brand_activation_later_button"}},y=864e5,x="requisites-popup-ts",w="brand-documents-popup-hide",A="ignore-test-environment-onboarding-popup",T=500;let I=class e extends(Object(k["vueComponent"])({i18n:j})){constructor(...e){super(...e),Object(i["a"])(this,"companyStore",u["company"].context(this.$store)),Object(i["a"])(this,"userStore",m["user"].context(this.$store)),Object(i["a"])(this,"applicationStore",c["application"].context(this.$store)),Object(i["a"])(this,"brandAccountStore",g["a"].context(this.$store)),Object(i["a"])(this,"isShow",!1),Object(i["a"])(this,"requisitesPopupLastViewTS",0),Object(i["a"])(this,"brandDocumentsHide",!1),Object(i["a"])(this,"ignoreTestEnvironment",!1)}get popupItems(){return[{title:this.$tr("Осталось добавить реквизиты"),content:this.$tr("Проверим их в течение одного рабочего дня..."),acceptText:this.$tr("Добавить реквизиты"),declineText:this.$tr("Напомнить позже"),available:this.isRequisitesPopupAvailable,logViewName:v.requisites.view,onAccept:this.moveToAppPage,onDecline:this.closeRequisitesPopup},{title:this.$tr("Загрузите документы на бренд"),content:this.$tr("Чтобы активировать кабинет бренда..."),acceptText:this.$tr("Загрузить документы"),declineText:this.$tr("Больше не показывать"),available:this.isBrandDocumentsPopupAvailable,logViewName:v.brandDocuments.view,onAccept:this.moveToApplicationCreate,onDecline:this.closeBrandDocumentsPopup}]}get popupItemActive(){return this.popupItems.find(({available:e})=>e)||null}get isTestEnvironment(){return Boolean(o.a.get(d["a"]))}get isRequisitesPopupAvailable(){var e;const s=[p["b"].SETTINGS_COMPANY,p["b"].SETTINGS_DOCS,p["b"].SETTINGS_BANK_DETAILS];return this.companyStore.getters.isSellGoods&&r()(null===(e=this.userStore.state.user)||void 0===e?void 0:e.roles,[b["a"].DIRECTOR,b["a"].CB_DIRECTOR,b["a"].ADMIN]).length>0&&!this.companyStore.getters.isOfferAccepted&&this.userStore.getters.appStatus===n["a"].NEW&&!this.applicationStore.state.declineReason&&!s.includes(this.$route.path)&&Date.now()-this.requisitesPopupLastViewTS>y&&(!this.isTestEnvironment||this.ignoreTestEnvironment)}get isBrandDocumentsAvailableByPreconditions(){return this.companyStore.getters.isSellGoods&&this.companyStore.getters.isBrand&&this.companyStore.getters.isCountryCodeRu&&this.userStore.getters.isUserDirectorOrAdmin&&this.companyStore.getters.isOfferAccepted&&this.companyStore.getters.currentCompanyMode===S["a"].seller&&!this.companyStore.getters.isSelfEmployed&&this.$route.path!==p["b"].BRAND_DOCUMENTS&&!this.brandDocumentsHide&&(!this.isTestEnvironment||this.ignoreTestEnvironment)}get isBrandDocumentsPopupAvailable(){return this.isBrandDocumentsAvailableByPreconditions&&!1===this.isRepresentative}get isRepresentative(){return this.brandAccountStore.state.isBrandRepresentative}get requisitesLastViewLsKey(){return`${x}-${this.companyStore.getters.companyId}`}onPopupItemActiveChange(e){e||this.closePopup()}async created(){const e=this.companyStore.getters.createdAt,s=new Date(e).getTime()+y>Date.now();!Number(localStorage.getItem(this.requisitesLastViewLsKey))&&e&&s&&localStorage.setItem(this.requisitesLastViewLsKey,String(new Date(e).getTime())),this.requisitesPopupLastViewTS=Number(localStorage.getItem(this.requisitesLastViewLsKey))||0,this.brandDocumentsHide=Boolean(localStorage.getItem(w)),this.ignoreTestEnvironment=Boolean(localStorage.getItem(A)),void 0===this.isRepresentative&&this.isBrandDocumentsAvailableByPreconditions&&await this.brandAccountStore.actions.checkIsBrandRepresentative(),setTimeout(this.openPopup,T)}closeRequisitesPopup(){this.closePopup(),this.rememberRequisitesLastView(),this.logClick(v.requisites.decline)}rememberRequisitesLastView(){localStorage.setItem(this.requisitesLastViewLsKey,String(Date.now()))}closeBrandDocumentsPopup(){this.closePopup(),localStorage.setItem(w,"1"),this.logClick(v.requisites.decline)}openPopup(){this.popupItemActive&&(this.isShow=!0,this.logView(this.popupItemActive.logViewName))}closePopup(){this.isShow=!1}moveToAppPage(){this.closePopup(),this.rememberRequisitesLastView(),this.companyStore.getters.isCountryCodeRu,this.$router.push(this.companyStore.getters.isCountryCodeRu?{path:"/dashboard"}:{path:p["b"].SETTINGS,query:{continueDocs:"true"}}),this.logClick(v.requisites.accept)}moveToApplicationCreate(){this.closePopup(),this.$router.push({path:p["b"].BRAND_DOCUMENTS,query:{currentTab:p["a"].REPRESENTATIVE}}),this.logClick(v.brandDocuments.accept)}logView(e){this.$log({actionType:this.$logActionTypes.VIEW_ACTION,widgetName:e})}logClick(e){this.$log({actionType:this.$logActionTypes.CLICK_ACTION,widgetName:e})}render(){var e,s,t,i,l,o;const a=arguments[0];return a(h["a"],{attrs:{isShow:this.isShow,closable:!1,customClass:V.a.popup,scrollStrategy:"backdrop"}},[a(h["d"],{attrs:{title:(null===(e=this.popupItemActive)||void 0===e?void 0:e.title)||"",image:a("img",{attrs:{src:R.a,width:"192",height:"192",alt:"hand with flag"}})}}),a(h["b"],[null===(s=this.popupItemActive)||void 0===s?void 0:s.content]),a("div",{class:V.a.footer},[a("div",{class:"mr4"},[a(f["a"],{directives:[{name:"test-id",value:"onboarding-popup/button.accept"}],attrs:{whenClick:null===(t=this.popupItemActive)||void 0===t?void 0:t.onAccept}},[null===(i=this.popupItemActive)||void 0===i?void 0:i.acceptText])]),a(f["a"],{directives:[{name:"test-id",value:"onboarding-popup/button.decline"}],attrs:{variant:"secondary",whenClick:null===(l=this.popupItemActive)||void 0===l?void 0:l.onDecline}},[null===(o=this.popupItemActive)||void 0===o?void 0:o.declineText])])])}};_([Object(k["Watch"])("popupItemActive")],I.prototype,"onPopupItemActiveChange",null),I=_([k["Component"]],I)},"/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-0-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-0-1!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/postcss-loader/src/index.js??ref--5-oneOf-0-2!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.css?module":function(e,s,t){e.exports={popup:"index_popup_jw8kM",footer:"index_footer_-N3it"}},"/builds/bSVCRpEm/9/marketplace/fe/seller-ui/node_modules/url-loader/dist/cjs.js??ref--1-0!/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/img/hand-with-flag.png":function(e,s){e.exports="/app/img/hand-with-flag.4f6283b6.png"},"/builds/bSVCRpEm/9/marketplace/fe/seller-ui/packages/seller-ui/src/components/call-to-action-popup/index.i18n.json":function(e){e.exports=JSON.parse('{"messages":{"ru":{"Осталось добавить реквизиты":"Осталось добавить реквизиты","Проверим их в течение одного рабочего дня...":"Проверим их в течение одного рабочего дня. Если всё в порядке, сможете принять оферту и продавать товары.","Добавить реквизиты":"Добавить реквизиты","Напомнить позже":"Напомнить позже","Загрузите документы на бренд":"Загрузите документы на бренд","Чтобы активировать кабинет бренда...":"Чтобы активировать кабинет бренда, нужно отправить нам документы на право владения или защиты товарного знака. На проверку уйдёт около 3 рабочих дней.","Загрузить документы":"Загрузить документы","Больше не показывать":"Больше не показывать"},"en":{"Осталось добавить реквизиты":"Only remains to add payment details","Проверим их в течение одного рабочего дня...":"We will check it within one working day. If everything is okay, you can accept the offer and sell products.","Добавить реквизиты":"Add payment details","Напомнить позже":"Remind me later","Загрузите документы на бренд":"Upload brand documents","Чтобы активировать кабинет бренда...":"To activate brand account, you need to send us documents for the ownership or protection of the trademark. It will take about 3 working days to check.","Загрузить документы":"Upload documents","Больше не показывать":"Don\'t show again"},"zh-Hans":{"Осталось добавить реквизиты":"还需要添加付款资料","Проверим их в течение одного рабочего дня...":"我们将在一个工作日内完成检查。如果一切正常，您将可以接受要约并销售商品。","Добавить реквизиты":"添加付款资料","Напомнить позже":"稍后提醒我","Загрузите документы на бренд":"将文件上传到品牌","Чтобы активировать кабинет бренда...":"如果您想激活品牌帐户，则需要向我们发送商标所有权或保护文件。检查大约需要 3 个工作日。","Загрузить документы":"上传文件","Больше не показывать":"不再显示"},"tr":{"Осталось добавить реквизиты":"Ayrıntıları eklemek için kaldı","Проверим их в течение одного рабочего дня...":"Onları bir iş günü içinde kontrol edeceğiz. Hiçbir sorun yoksa, teklifi kabul edebilir ve ürünleri satabilirsiniz.","Добавить реквизиты":"Ayrıntıları ekle","Напомнить позже":"Daha sonra hatırlat","Загрузите документы на бренд":"Marka belgelerini yükle ","Чтобы активировать кабинет бренда...":"Marka hesabını etkinleştirmek için, bir ticari markaya sahip olma veya ticari markayı koruma hakkı için bize belgeler göndermeniz gerekir. Doğrulanması yaklaşık 3 iş günü sürecektir.","Загрузить документы":"Belgeleri yükle","Больше не показывать":"Bir daha gösterme"}}}')}}]);
//# sourceMappingURL=chunk-51e474a6.721e34da.js.map